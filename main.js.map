{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/components/modal.js","webpack://mesto-project-ff/./src/components/api.js","webpack://mesto-project-ff/./src/components/cards.js","webpack://mesto-project-ff/./src/components/validation.js","webpack://mesto-project-ff/./src/index.js"],"sourcesContent":["const handleEscKey = (evt) => {\r\n    if (evt.key === 'Escape') {\r\n        const openedPopup = document.querySelector('.popup_is-opened');\r\n        closeModal(openedPopup);\r\n    }\r\n};\r\n\r\nexport function openModal(modal) {\r\n    modal.classList.add('popup_is-opened');\r\n    document.addEventListener('keydown', handleEscKey);\r\n};\r\n\r\nexport function closeModal(modal) {\r\n    modal.classList.remove('popup_is-opened');\r\n    document.removeEventListener('keydown', handleEscKey);\r\n};","const config = {\r\n  baseUrl: 'https://mesto.nomoreparties.co/v1/wff-cohort-42',\r\n  headers: {\r\n    authorization: '847f48dc-6a93-45de-a7d1-dce7549a04e7',\r\n    'Content-Type': 'application/json'\r\n  }\r\n};\r\n\r\nfunction checkResponse(res) {\r\n  return res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`);\r\n}\r\n\r\nexport function getUserInfo() {\r\n  return fetch(`${config.baseUrl}/users/me`, { headers: config.headers })\r\n    .then(checkResponse);\r\n}\r\n\r\nexport function getInitialCards() {\r\n  return fetch(`${config.baseUrl}/cards`, { headers: config.headers })\r\n    .then(checkResponse);\r\n}\r\n\r\nexport function updateUserInfo({ name, about }) {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    method: 'PATCH',\r\n    headers: config.headers,\r\n    body: JSON.stringify({ name, about })\r\n  }).then(checkResponse);\r\n}\r\n\r\nexport function addNewCard({ name, link }) {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    method: 'POST',\r\n    headers: config.headers,\r\n    body: JSON.stringify({ name, link })\r\n  }).then(checkResponse);\r\n}\r\n\r\nexport function deleteCard(cardId) {\r\n  return fetch(`${config.baseUrl}/cards/${cardId}`, {\r\n    method: 'DELETE',\r\n    headers: config.headers\r\n  }).then(checkResponse);\r\n}\r\n\r\nexport function likeCard(cardId) {\r\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n    method: 'PUT',\r\n    headers: config.headers\r\n  }) .then(checkResponse);\r\n}\r\n\r\nexport function unlikeCard(cardId) {\r\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n    method: 'DELETE',\r\n    headers: config.headers\r\n  }) .then(checkResponse);\r\n}\r\n\r\nexport function updateUserAvatar(avatarLink) {\r\n  return fetch(`${config.baseUrl}/users/me/avatar`, {\r\n    method: 'PATCH',\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n        avatar: avatarLink\r\n      })\r\n  }) .then(checkResponse);\r\n}","//import { escape } from \"core-js/fn/regexp\";\r\n\r\nimport { likeCard, unlikeCard } from './api.js';\r\n\r\nexport function createCard(cardData, handleDeleteCard, handleOpenImage, userId) {\r\n    const cardTemplate = document.querySelector('#card-template').content;\r\n    const cardElement = cardTemplate.querySelector('.card').cloneNode(true);\r\n    \r\n    const cardImage = cardElement.querySelector('.card__image');\r\n    const cardTitle = cardElement.querySelector('.card__title');\r\n    const deleteButton = cardElement.querySelector('.card__delete-button');\r\n    const likeButton = cardElement.querySelector('.card__like-button');\r\n    const likeCount = cardElement.querySelector('.card__like-count');\r\n    const cardId = cardData._id;\r\n\r\n    cardImage.src = cardData.link;\r\n    cardImage.alt = cardData.name;\r\n    cardTitle.textContent = cardData.name;\r\n    likeCount.textContent = cardData.likes.length;\r\n    \r\n    if (cardData.owner._id == userId) {\r\n      deleteButton.addEventListener('click', () => handleDeleteCard(cardId, cardElement));\r\n    } else {\r\n      deleteButton.remove();\r\n    }\r\n\r\n    if (cardData.likes.some(like => like._id === userId)) {\r\n        likeButton.classList.add('card__like-button_is-active');\r\n    }\r\n\r\n    cardImage.addEventListener('click', () => handleOpenImage(cardData.name, cardData.link));\r\n\r\n    likeButton.addEventListener('click', () => {\r\n      const isLiked = likeButton.classList.contains('card__like-button_is-active');\r\n      const action = isLiked ? unlikeCard : likeCard;\r\n      action(cardId)\r\n        .then(updatedCard => {\r\n          // Обновляем количество лайков с сервера\r\n          likeCount.textContent = updatedCard.likes.length;\r\n          likeButton.classList.toggle('card__like-button_is-active');\r\n        })\r\n        .catch(err => console.error(err));\r\n  });\r\n\r\n    return cardElement;\r\n};","export const validationConfig = {\r\n  formSelector: '.popup__form, .popup__form-avatar',\r\n  inputSelector: '.popup__input',\r\n  submitButtonSelector: '.popup__button',\r\n  inactiveButtonClass: 'popup__button_disabled',\r\n  inputErrorClass: 'form__input_type_error',\r\n  errorClass: 'form__input-error_active'\r\n};\r\n\r\nexport const enableValidation = (config) => {\r\n    const formList = Array.from(document.querySelectorAll(config.formSelector));\r\n\r\n    formList.forEach((formElement) => { \r\n        setEventListeners(formElement, config);\r\n        toggleButtonState(formElement, config);\r\n    });\r\n};\r\n\r\nconst setEventListeners = (formElement, config) => {\r\n  const inputList = Array.from(formElement.querySelectorAll(config.inputSelector));\r\n  \r\n  inputList.forEach((inputElement) => {\r\n    if (inputElement.dataset.errorMessage) {\r\n      inputElement.setCustomValidity(inputElement.dataset.errorMessage);\r\n    };\r\n    inputElement.addEventListener('input', () => {\r\n      checkInputValidity(formElement, inputElement, config);\r\n      toggleButtonState(formElement, config);\r\n    });\r\n  });\r\n};\r\n\r\nexport const checkInputValidity = (formElement, inputElement, config) => {\r\n    if (inputElement.pattern && inputElement.validity.patternMismatch) {\r\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage || 'Недопустимые символы');\r\n    } else if (inputElement.type === 'url' && !inputElement.validity.valid) {\r\n    inputElement.setCustomValidity('Введите корректный URL (начинается с http:// или https://)');\r\n    } else {\r\n    inputElement.setCustomValidity('');\r\n    }\r\n\r\n    if (!inputElement.validity.valid) {\r\n    showInputError(formElement, inputElement, inputElement.validationMessage, config);\r\n    } else {\r\n    hideInputError(formElement, inputElement, config);\r\n    }\r\n};\r\n\r\nconst showInputError = (formElement, inputElement, errorMessage, config) => {\r\n    const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n    if (!errorElement) return;\r\n    inputElement.classList.add(config.inputErrorClass);\r\n    errorElement.textContent = errorMessage;\r\n    errorElement.classList.add(config.errorClass);\r\n};\r\n\r\nconst hideInputError = (formElement, inputElement, config) => {\r\n    const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n    if (!errorElement) return;\r\n    inputElement.classList.remove(config.inputErrorClass);\r\n    errorElement.classList.remove(config.errorClass);\r\n    errorElement.textContent = '';\r\n};\r\n\r\nconst hasInvalidInput = (inputList) => {\r\n    return inputList.some((inputElement) => {\r\n        return !inputElement.validity.valid;\r\n    }); \r\n};\r\n\r\nconst toggleButtonState = (formElement, config) => {\r\n    const inputList = Array.from(formElement.querySelectorAll(config.inputSelector));\r\n    const buttonElement = formElement.querySelector(config.submitButtonSelector);\r\n\r\n    if (!buttonElement) return;\r\n  \r\n    if (hasInvalidInput(inputList)) {\r\n        buttonElement.disabled = true;\r\n        buttonElement.classList.add(config.inactiveButtonClass);\r\n    } else {\r\n        buttonElement.disabled = false;\r\n        buttonElement.classList.remove(config.inactiveButtonClass);\r\n    }\r\n};\r\n\r\nexport const clearValidation = (formElement, config) => {\r\n  const inputList = Array.from(formElement.querySelectorAll(config.inputSelector));\r\n  \r\n  inputList.forEach((inputElement) => {\r\n    hideInputError(formElement, inputElement, config);\r\n    inputElement.setCustomValidity('');\r\n  });\r\n\r\n  const buttonElement = formElement.querySelector(config.submitButtonSelector);\r\n  if (buttonElement) {\r\n    buttonElement.disabled = true;\r\n    buttonElement.classList.add(config.inactiveButtonClass);\r\n  }\r\n  \r\n  toggleButtonState(formElement, config);\r\n};","import './pages/index.css';\r\nimport { openModal, closeModal } from '../src/components/modal.js';\r\nimport { createCard } from '../src/components/cards.js';\r\nimport { validationConfig, enableValidation, clearValidation } from '../src/components/validation.js';\r\nimport { getUserInfo, getInitialCards, updateUserInfo, addNewCard, deleteCard, updateUserAvatar } from '../src/components/api.js';\r\n\r\nconst profileEditModal = document.querySelector('.popup_type_edit');\r\nconst addCardModal = document.querySelector('.popup_type_new-card');\r\nconst imageModal = document.querySelector('.popup_type_image');\r\nconst confirmDeleteModal = document.querySelector('.popup_type_confirm-delete');\r\nconst confirmDeleteForm = confirmDeleteModal.querySelector('.popup__form');\r\n\r\nconst profileEditButton = document.querySelector('.profile__edit-button');\r\nconst addCardButton = document.querySelector('.profile__add-button');\r\nconst profileForm = document.querySelector('.popup_type_edit .popup__form');\r\nconst addCardForm = document.querySelector('.popup_type_new-card .popup__form');\r\nconst profileName = document.querySelector('.profile__title');\r\nconst profileDescription = document.querySelector('.profile__description');\r\nconst nameInput = profileForm.querySelector('.popup__input_type_name');\r\nconst jobInput = profileForm.querySelector('.popup__input_type_description');\r\nconst cardNameInput = addCardForm.querySelector('.popup__input_type_card-name');\r\nconst cardLinkInput = addCardForm.querySelector('.popup__input_type_url');\r\nconst popupImage = imageModal.querySelector('.popup__image');\r\nconst popupCaption = imageModal.querySelector('.popup__caption');\r\nconst cardsContainer = document.querySelector('.places__list');\r\n\r\nconst avatarModal = document.querySelector('.popup_type_avatar');\r\nconst avatarForm = avatarModal.querySelector('.popup__form-avatar');\r\nconst avatarInput = avatarForm.querySelector('.popup__input_type_url');\r\nconst profileImage = document.querySelector('.profile__image');\r\n\r\nlet userId = null;\r\nlet cardToDelete = null;\r\nlet cardIdToDelete = null;\r\n\r\nfunction renderLoading(buttonElement, isLoading, loadingText = 'Сохранение...', defaultText = 'Сохранить') {\r\n  buttonElement.textContent = isLoading ? loadingText : defaultText;\r\n}\r\n\r\nfunction handleDeleteClick(cardElement, cardId) {\r\n  cardToDelete = cardElement;\r\n  cardIdToDelete = cardId;\r\n  openModal(deletePopup);\r\n}\r\n\r\navatarForm.addEventListener('submit', (evt) => {\r\n  evt.preventDefault();\r\n\r\n  const submitButton = evt.submitter;\r\n  \r\n  renderLoading(submitButton, true);\r\n\r\n  updateUserAvatar(avatarInput.value)\r\n    .then((data) => {\r\n      profileImage.style.backgroundImage = `url(${data.avatar})`;\r\n      closeModal(avatarModal);\r\n      avatarForm.reset();\r\n    })\r\n    .catch(console.error);\r\n});\r\n\r\nconfirmDeleteForm.addEventListener('submit', (evt) => {\r\n  evt.preventDefault();\r\n\r\n  const submitButton = evt.submitter;\r\n  \r\n  renderLoading(submitButton, true);\r\n\r\n  deleteCard(cardIdToDelete)\r\n    .then(() => {\r\n      cardToDelete.remove();\r\n      closeModal(deletePopup);\r\n      cardToDelete = null;\r\n      cardIdToDelete = null;\r\n    })\r\n    .catch((err) => console.log(err));\r\n});\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  enableValidation(validationConfig);\r\n});\r\n\r\nPromise.all([getUserInfo(), getInitialCards()])\r\n  .then(([userData, cards]) => {\r\n    userId = userData._id;\r\n    profileName.textContent = userData.name;\r\n    profileDescription.textContent = userData.about;\r\n    document.querySelector('.profile__image').style.backgroundImage = `url(${userData.avatar})`;\r\n\r\n    cards.forEach((card) => {\r\n      const cardElement = createCard(card, handleDeleteCard, openImagePopup, userId);\r\n      cardsContainer.append(cardElement);\r\n    });\r\n  })\r\n  .catch(console.error);\r\n\r\nfunction handleDeleteCard(cardId, cardElement) {\r\n  cardIdToDelete = cardId;\r\n  cardToDelete = cardElement;\r\n  openModal(confirmDeleteModal);\r\n}\r\n\r\nconfirmDeleteForm.addEventListener('submit', (evt) => {\r\n  evt.preventDefault();\r\n  deleteCard(cardIdToDelete)\r\n    .then(() => {\r\n      cardToDelete.remove();\r\n      closeModal(confirmDeleteModal);\r\n    })\r\n    .catch(console.error);\r\n});\r\n\r\nfunction fillProfileForm() {\r\n  nameInput.value = profileName.textContent;\r\n  jobInput.value = profileDescription.textContent;\r\n}\r\n\r\nfunction handleProfileFormSubmit(evt) {\r\n  evt.preventDefault();\r\n\r\n  const submitButton = evt.submitter;\r\n  \r\n  renderLoading(submitButton, true);\r\n\r\n  updateUserInfo({ name: nameInput.value, about: jobInput.value })\r\n    .then((data) => {\r\n      profileName.textContent = data.name;\r\n      profileDescription.textContent = data.about;\r\n      closeModal(profileEditModal);\r\n    })\r\n    .catch(console.error)\r\n    .finally(() => {\r\n      renderLoading(submitButton, false);\r\n    });\r\n}\r\n\r\nfunction handleAddCardFormSubmit(evt) {\r\n  evt.preventDefault();\r\n\r\n  const submitButton = evt.submitter;\r\n  \r\n  renderLoading(submitButton, true);  \r\n\r\n  addNewCard({ name: cardNameInput.value, link: cardLinkInput.value })\r\n    .then((card) => {\r\n      const cardElement = createCard(card, handleDeleteCard, openImagePopup, userId);\r\n      cardsContainer.prepend(cardElement);\r\n      addCardForm.reset();\r\n      closeModal(addCardModal);\r\n    })\r\n    .catch(console.error);\r\n}\r\n\r\nfunction openImagePopup(name, link) {\r\n  popupImage.src = link;\r\n  popupImage.alt = name;\r\n  popupCaption.textContent = name;\r\n  openModal(imageModal);\r\n}\r\n\r\ndocument.querySelectorAll('.popup').forEach(popup => {\r\n  popup.addEventListener('mousedown', (evt) => {\r\n    if (evt.target === popup || evt.target.classList.contains('popup__close')) {\r\n      closeModal(popup);\r\n    }\r\n  });\r\n});\r\n\r\nprofileImage.addEventListener('click', () => {\r\n  avatarForm.reset();\r\n  clearValidation(avatarForm, validationConfig);\r\n  openModal(avatarModal);\r\n});\r\n\r\nprofileEditButton.addEventListener('click', () => {\r\n  fillProfileForm();\r\n  openModal(profileEditModal);\r\n  clearValidation(profileForm, validationConfig);\r\n});\r\n\r\naddCardButton.addEventListener('click', () => {\r\n  openModal(addCardModal);\r\n  clearValidation(addCardForm, validationConfig);\r\n});\r\n\r\nprofileForm.addEventListener('submit', handleProfileFormSubmit);\r\naddCardForm.addEventListener('submit', handleAddCardFormSubmit);"],"names":["handleEscKey","evt","key","closeModal","document","querySelector","openModal","modal","classList","add","addEventListener","remove","removeEventListener","config","baseUrl","headers","authorization","checkResponse","res","ok","json","Promise","reject","concat","status","deleteCard","cardId","fetch","method","then","likeCard","unlikeCard","createCard","cardData","handleDeleteCard","handleOpenImage","userId","cardElement","content","cloneNode","cardImage","cardTitle","deleteButton","likeButton","likeCount","_id","src","link","alt","name","textContent","likes","length","owner","some","like","contains","updatedCard","toggle","catch","err","console","error","validationConfig","formSelector","inputSelector","submitButtonSelector","inactiveButtonClass","inputErrorClass","errorClass","checkInputValidity","formElement","inputElement","pattern","validity","patternMismatch","setCustomValidity","dataset","errorMessage","type","valid","hideInputError","showInputError","validationMessage","errorElement","id","toggleButtonState","inputList","Array","from","querySelectorAll","buttonElement","hasInvalidInput","disabled","clearValidation","forEach","profileEditModal","addCardModal","imageModal","confirmDeleteModal","confirmDeleteForm","profileEditButton","addCardButton","profileForm","addCardForm","profileName","profileDescription","nameInput","jobInput","cardNameInput","cardLinkInput","popupImage","popupCaption","cardsContainer","avatarModal","avatarForm","avatarInput","profileImage","cardToDelete","cardIdToDelete","renderLoading","isLoading","loadingText","arguments","undefined","defaultText","openImagePopup","avatarLink","preventDefault","submitter","value","body","JSON","stringify","avatar","data","style","backgroundImage","reset","deletePopup","log","setEventListeners","enableValidation","all","_ref","_ref2","userData","cards","about","card","append","popup","target","submitButton","finally","prepend"],"sourceRoot":""}