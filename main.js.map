{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/components/modal.js","webpack://mesto-project-ff/./src/components/api.js","webpack://mesto-project-ff/./src/components/cards.js","webpack://mesto-project-ff/./src/components/validation.js","webpack://mesto-project-ff/./src/index.js"],"sourcesContent":["const handleEscKey = (evt) => {\r\n    if (evt.key === 'Escape') {\r\n        const openedPopup = document.querySelector('.popup_is-opened');\r\n        closeModal(openedPopup);\r\n    }\r\n};\r\n\r\nexport function openModal(modal) {\r\n    modal.classList.add('popup_is-opened');\r\n    modal.classList.add('popup_is-animated');\r\n    setTimeout(() => {\r\n        modal.classList.add('popup_is-visible');\r\n    }, 1);\r\n    document.addEventListener('keydown', handleEscKey);\r\n};\r\n\r\nexport function closeModal(modal) {\r\n    modal.classList.remove('popup_is-opened');\r\n    document.removeEventListener('keydown', handleEscKey);\r\n};","const config = {\r\n  baseUrl: 'https://mesto.nomoreparties.co/v1/wff-cohort-42',\r\n  headers: {\r\n    authorization: '847f48dc-6a93-45de-a7d1-dce7549a04e7',\r\n    'Content-Type': 'application/json'\r\n  }\r\n};\r\n\r\nfunction checkResponse(res) {\r\n  return res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`);\r\n}\r\n\r\nexport function getUserInfo() {\r\n  return fetch(`${config.baseUrl}/users/me`, { headers: config.headers })\r\n    .then(checkResponse);\r\n}\r\n\r\nexport function getInitialCards() {\r\n  return fetch(`${config.baseUrl}/cards`, { headers: config.headers })\r\n    .then(checkResponse);\r\n}\r\n\r\nexport function updateUserInfo({ name, about }) {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    method: 'PATCH',\r\n    headers: config.headers,\r\n    body: JSON.stringify({ name, about })\r\n  }).then(checkResponse);\r\n}\r\n\r\nexport function addNewCard({ name, link }) {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    method: 'POST',\r\n    headers: config.headers,\r\n    body: JSON.stringify({ name, link })\r\n  }).then(checkResponse);\r\n}\r\n\r\nexport function deleteCard(cardId) {\r\n  return fetch(`${config.baseUrl}/cards/${cardId}`, {\r\n    method: 'DELETE',\r\n    headers: config.headers\r\n  }).then(checkResponse);\r\n}\r\n\r\nexport function likeCard(cardId) {\r\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n    method: 'PUT',\r\n    headers: config.headers\r\n  }) .then(checkResponse);\r\n}\r\n\r\nexport function unlikeCard(cardId) {\r\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n    method: 'DELETE',\r\n    headers: config.headers\r\n  }) .then(checkResponse);\r\n}\r\n\r\nexport function updateUserAvatar(avatarLink) {\r\n  return fetch(`${config.baseUrl}/users/me/avatar`, {\r\n    method: 'PATCH',\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n        avatar: avatarLink\r\n      })\r\n  }) .then(checkResponse);\r\n}","//import { escape } from \"core-js/fn/regexp\";\r\n\r\nimport { likeCard, unlikeCard } from './api.js';\r\n\r\nexport function createCard(cardData, handleDeleteCard, handleOpenImage, userId) {\r\n    const cardTemplate = document.querySelector('#card-template').content;\r\n    const cardElement = cardTemplate.querySelector('.card').cloneNode(true);\r\n    \r\n    const cardImage = cardElement.querySelector('.card__image');\r\n    const cardTitle = cardElement.querySelector('.card__title');\r\n    const deleteButton = cardElement.querySelector('.card__delete-button');\r\n    const likeButton = cardElement.querySelector('.card__like-button');\r\n    const likeCount = cardElement.querySelector('.card__like-count');\r\n    const cardId = cardData._id;\r\n\r\n    cardImage.src = cardData.link;\r\n    cardImage.alt = cardData.name;\r\n    cardTitle.textContent = cardData.name;\r\n    likeCount.textContent = cardData.likes.length;\r\n    \r\n    if (cardData.owner._id == userId) {\r\n      deleteButton.addEventListener('click', () => handleDeleteCard(cardId, cardElement));\r\n    } else {\r\n      deleteButton.remove();\r\n    }\r\n\r\n    if (cardData.likes.some(like => like._id === userId)) {\r\n        likeButton.classList.add('card__like-button_is-active');\r\n    }\r\n\r\n    cardImage.addEventListener('click', () => handleOpenImage(cardData.name, cardData.link));\r\n\r\n    likeButton.addEventListener('click', () => {\r\n      const isLiked = likeButton.classList.contains('card__like-button_is-active');\r\n      const action = isLiked ? unlikeCard : likeCard;\r\n      action(cardId)\r\n        .then(updatedCard => {\r\n          // Обновляем количество лайков с сервера\r\n          likeCount.textContent = updatedCard.likes.length;\r\n          likeButton.classList.toggle('card__like-button_is-active');\r\n        })\r\n        .catch(err => console.error(err));\r\n  });\r\n\r\n    return cardElement;\r\n};","export const validationConfig = {\r\n  formSelector: '.popup__form, .popup__form-avatar',\r\n  inputSelector: '.popup__input',\r\n  submitButtonSelector: '.popup__button',\r\n  inactiveButtonClass: 'popup__button_disabled',\r\n  inputErrorClass: 'form__input_type_error',\r\n  errorClass: 'form__input-error_active'\r\n};\r\n\r\nexport const enableValidation = (config) => {\r\n    const formList = Array.from(document.querySelectorAll(config.formSelector));\r\n\r\n    formList.forEach((formElement) => { \r\n        setEventListeners(formElement, config);\r\n        toggleButtonState(formElement, config);\r\n    });\r\n};\r\n\r\nconst setEventListeners = (formElement, config) => {\r\n  const inputList = Array.from(formElement.querySelectorAll(config.inputSelector));\r\n  \r\n  inputList.forEach((inputElement) => {\r\n    inputElement.addEventListener('input', () => {\r\n      checkInputValidity(formElement, inputElement, config);\r\n      toggleButtonState(formElement, config);\r\n    });\r\n  });\r\n};\r\n\r\nexport const checkInputValidity = (formElement, inputElement, config) => {\r\n  if (inputElement.validity.patternMismatch) {\r\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage || 'Недопустимые символы');\r\n  } else if (inputElement.type === 'url' && !inputElement.validity.valid) {\r\n    inputElement.setCustomValidity('Введите корректный URL (начинается с http:// или https://)');\r\n  } else {\r\n    inputElement.setCustomValidity('');\r\n  }\r\n\r\n  if (!inputElement.validity.valid) {\r\n    showInputError(formElement, inputElement, inputElement.validationMessage, config);\r\n  } else {\r\n    hideInputError(formElement, inputElement, config);\r\n  }\r\n};\r\n\r\nconst showInputError = (formElement, inputElement, errorMessage, config) => {\r\n    const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n    if (!errorElement) return;\r\n    inputElement.classList.add(config.inputErrorClass);\r\n    errorElement.textContent = errorMessage;\r\n    errorElement.classList.add(config.errorClass);\r\n};\r\n\r\nconst hideInputError = (formElement, inputElement, config) => {\r\n    const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n    if (!errorElement) return;\r\n    inputElement.classList.remove(config.inputErrorClass);\r\n    errorElement.classList.remove(config.errorClass);\r\n    errorElement.textContent = '';\r\n};\r\n\r\nconst hasInvalidInput = (inputList) => {\r\n    return inputList.some((inputElement) => {\r\n        return !inputElement.validity.valid;\r\n    }); \r\n};\r\n\r\nconst disableButton = (buttonElement, config) => {\r\n  buttonElement.disabled = true;\r\n  buttonElement.classList.add(config.inactiveButtonClass);\r\n};\r\n\r\nconst enableButton = (buttonElement, config) => {\r\n  buttonElement.disabled = false;\r\n  buttonElement.classList.remove(config.inactiveButtonClass);\r\n};\r\n\r\nconst toggleButtonState = (formElement, config) => {\r\n    const inputList = Array.from(formElement.querySelectorAll(config.inputSelector));\r\n    const buttonElement = formElement.querySelector(config.submitButtonSelector);\r\n\r\n    if (!buttonElement) return;\r\n  \r\n    if (hasInvalidInput(inputList)) {\r\n        disableButton(buttonElement, config);\r\n    } else {\r\n        enableButton(buttonElement, config)\r\n    }\r\n};\r\n\r\nexport const clearValidation = (formElement, config) => {\r\n  const inputList = Array.from(formElement.querySelectorAll(config.inputSelector));\r\n  \r\n  inputList.forEach((inputElement) => {\r\n    hideInputError(formElement, inputElement, config);\r\n    inputElement.setCustomValidity('');\r\n  });\r\n\r\n  const buttonElement = formElement.querySelector(config.submitButtonSelector);\r\n  if (buttonElement) {\r\n    disableButton(buttonElement, config);\r\n  }\r\n  \r\n  toggleButtonState(formElement, config);\r\n};","import './pages/index.css';\r\nimport { openModal, closeModal } from '../src/components/modal.js';\r\nimport { createCard } from '../src/components/cards.js';\r\nimport { validationConfig, enableValidation, clearValidation } from '../src/components/validation.js';\r\nimport { getUserInfo, getInitialCards, updateUserInfo, addNewCard, deleteCard, updateUserAvatar } from '../src/components/api.js';\r\n\r\nconst profileEditModal = document.querySelector('.popup_type_edit');\r\nconst addCardModal = document.querySelector('.popup_type_new-card');\r\nconst imageModal = document.querySelector('.popup_type_image');\r\nconst confirmDeleteModal = document.querySelector('.popup_type_confirm-delete');\r\nconst confirmDeleteForm = confirmDeleteModal.querySelector('.popup__form');\r\n\r\nconst profileEditButton = document.querySelector('.profile__edit-button');\r\nconst addCardButton = document.querySelector('.profile__add-button');\r\nconst profileForm = document.querySelector('.popup_type_edit .popup__form');\r\nconst addCardForm = document.querySelector('.popup_type_new-card .popup__form');\r\nconst profileName = document.querySelector('.profile__title');\r\nconst profileDescription = document.querySelector('.profile__description');\r\nconst nameInput = profileForm.querySelector('.popup__input_type_name');\r\nconst jobInput = profileForm.querySelector('.popup__input_type_description');\r\nconst cardNameInput = addCardForm.querySelector('.popup__input_type_card-name');\r\nconst cardLinkInput = addCardForm.querySelector('.popup__input_type_url');\r\nconst popupImage = imageModal.querySelector('.popup__image');\r\nconst popupCaption = imageModal.querySelector('.popup__caption');\r\nconst cardsContainer = document.querySelector('.places__list');\r\n\r\nconst avatarModal = document.querySelector('.popup_type_avatar');\r\nconst avatarForm = avatarModal.querySelector('.popup__form-avatar');\r\nconst avatarInput = avatarForm.querySelector('.popup__input_type_url');\r\nconst profileImage = document.querySelector('.profile__image');\r\n\r\nlet userId = null;\r\nlet cardToDelete = null;\r\nlet cardIdToDelete = null;\r\n\r\nfunction renderLoading(buttonElement, isLoading, loadingText = 'Сохранение...') {\r\n  // Сохраняем оригинальный текст, если он ещё не сохранён\r\n  if (!buttonElement.dataset.originalText) {\r\n    buttonElement.dataset.originalText = buttonElement.textContent;\r\n  }\r\n\r\n  if (isLoading) {\r\n    buttonElement.textContent = loadingText;\r\n  } else {\r\n    buttonElement.textContent = buttonElement.dataset.originalText;\r\n  }\r\n};\r\n\r\navatarForm.addEventListener('submit', (evt) => {\r\n  evt.preventDefault();\r\n\r\n  const submitButton = evt.submitter;\r\n  \r\n  renderLoading(submitButton, true);\r\n\r\n  updateUserAvatar(avatarInput.value)\r\n    .then((data) => {\r\n      profileImage.style.backgroundImage = `url(${data.avatar})`;\r\n      closeModal(avatarModal);\r\n      avatarForm.reset();\r\n    })\r\n    .catch(console.error)\r\n    .finally(() => {\r\n      renderLoading(submitButton, false);\r\n    });\r\n});\r\n\r\nconfirmDeleteForm.addEventListener('submit', (evt) => {\r\n  evt.preventDefault();\r\n\r\n  const submitButton = evt.submitter;\r\n  \r\n  renderLoading(submitButton, true);\r\n\r\n  deleteCard(cardIdToDelete)\r\n    .then(() => {\r\n      cardToDelete.remove();\r\n      closeModal(confirmDeleteModal);\r\n      cardToDelete = null;\r\n      cardIdToDelete = null;\r\n    })\r\n    .catch((err) => console.log(err))\r\n    .finally(() => {\r\n      renderLoading(submitButton, false);\r\n    });\r\n});\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  enableValidation(validationConfig);\r\n});\r\n\r\nPromise.all([getUserInfo(), getInitialCards()])\r\n  .then(([userData, cards]) => {\r\n    userId = userData._id;\r\n    profileName.textContent = userData.name;\r\n    profileDescription.textContent = userData.about;\r\n    profileImage.style.backgroundImage = `url(${userData.avatar})`;\r\n\r\n    cards.forEach((card) => {\r\n      const cardElement = createCard(card, handleDeleteCard, openImagePopup, userId);\r\n      cardsContainer.append(cardElement);\r\n    });\r\n  })\r\n  .catch(console.error);\r\n\r\nfunction handleDeleteCard(cardId, cardElement) {\r\n  cardIdToDelete = cardId;\r\n  cardToDelete = cardElement;\r\n  openModal(confirmDeleteModal);\r\n}\r\n\r\nfunction fillProfileForm() {\r\n  nameInput.value = profileName.textContent;\r\n  jobInput.value = profileDescription.textContent;\r\n}\r\n\r\nfunction handleProfileFormSubmit(evt) {\r\n  evt.preventDefault();\r\n\r\n  const submitButton = evt.submitter;\r\n  \r\n  renderLoading(submitButton, true);\r\n\r\n  updateUserInfo({ name: nameInput.value, about: jobInput.value })\r\n    .then((data) => {\r\n      profileName.textContent = data.name;\r\n      profileDescription.textContent = data.about;\r\n      closeModal(profileEditModal);\r\n    })\r\n    .catch(console.error)\r\n    .finally(() => {\r\n      renderLoading(submitButton, false);\r\n    });\r\n}\r\n\r\nfunction handleAddCardFormSubmit(evt) {\r\n  evt.preventDefault();\r\n\r\n  const submitButton = evt.submitter;\r\n  \r\n  renderLoading(submitButton, true);  \r\n\r\n  addNewCard({ name: cardNameInput.value, link: cardLinkInput.value })\r\n    .then((card) => {\r\n      const cardElement = createCard(card, handleDeleteCard, openImagePopup, userId);\r\n      cardsContainer.prepend(cardElement);\r\n      addCardForm.reset();\r\n      closeModal(addCardModal);\r\n    })\r\n    .catch(console.error)\r\n    .finally(() => {\r\n      renderLoading(submitButton, false);\r\n    });\r\n}\r\n\r\nfunction openImagePopup(name, link) {\r\n  popupImage.src = link;\r\n  popupImage.alt = name;\r\n  popupCaption.textContent = name;\r\n  openModal(imageModal);\r\n}\r\n\r\ndocument.querySelectorAll('.popup').forEach(popup => {\r\n  popup.addEventListener('mousedown', (evt) => {\r\n    if (evt.target === popup || evt.target.classList.contains('popup__close')) {\r\n      closeModal(popup);\r\n    }\r\n  });\r\n});\r\n\r\nprofileImage.addEventListener('click', () => {\r\n  avatarForm.reset();\r\n  clearValidation(avatarForm, validationConfig);\r\n  openModal(avatarModal);\r\n});\r\n\r\nprofileEditButton.addEventListener('click', () => {\r\n  fillProfileForm();\r\n  openModal(profileEditModal);\r\n  clearValidation(profileForm, validationConfig);\r\n});\r\n\r\naddCardButton.addEventListener('click', () => {\r\n  openModal(addCardModal);\r\n  clearValidation(addCardForm, validationConfig);\r\n});\r\n\r\nprofileForm.addEventListener('submit', handleProfileFormSubmit);\r\naddCardForm.addEventListener('submit', handleAddCardFormSubmit);"],"names":["handleEscKey","evt","key","closeModal","document","querySelector","openModal","modal","classList","add","setTimeout","addEventListener","remove","removeEventListener","config","baseUrl","headers","authorization","checkResponse","res","ok","json","Promise","reject","concat","status","likeCard","cardId","fetch","method","then","unlikeCard","createCard","cardData","handleDeleteCard","handleOpenImage","userId","cardElement","content","cloneNode","cardImage","cardTitle","deleteButton","likeButton","likeCount","_id","src","link","alt","name","textContent","likes","length","owner","some","like","contains","updatedCard","toggle","catch","err","console","error","validationConfig","formSelector","inputSelector","submitButtonSelector","inactiveButtonClass","inputErrorClass","errorClass","checkInputValidity","formElement","inputElement","validity","patternMismatch","setCustomValidity","dataset","errorMessage","type","valid","hideInputError","showInputError","validationMessage","errorElement","id","disableButton","buttonElement","disabled","toggleButtonState","inputList","Array","from","querySelectorAll","hasInvalidInput","enableButton","clearValidation","forEach","profileEditModal","addCardModal","imageModal","confirmDeleteModal","confirmDeleteForm","profileEditButton","addCardButton","profileForm","addCardForm","profileName","profileDescription","nameInput","jobInput","cardNameInput","cardLinkInput","popupImage","popupCaption","cardsContainer","avatarModal","avatarForm","avatarInput","profileImage","cardToDelete","cardIdToDelete","renderLoading","isLoading","loadingText","arguments","undefined","originalText","openImagePopup","preventDefault","avatarLink","submitButton","submitter","value","body","JSON","stringify","avatar","data","style","backgroundImage","reset","finally","log","setEventListeners","enableValidation","all","_ref","_ref2","userData","cards","about","card","append","popup","target","prepend"],"sourceRoot":""}